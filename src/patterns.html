<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <title>Шаблоны сопоставления `match`</title>

    <link rel="stylesheet" type="text/css" href="../rustbook.css">

    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    
                <div id="nav">
                    <button id="toggle-nav">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                    </button>
                </div>
<div id='toc' class='mobile-hidden'>
<ol class='chapter'>
<li><a  href='../README.html'><b>1.</b> Introduction</a>
</li>
<li><a  href='../src/INTRODUCTION.html'><b>2.</b> Введение</a>
</li>
<li><a  href='../src/getting-started.html'><b>3.</b> C чего начать</a>
</li>
<li><a  href='../src/learn-rust.html'><b>4.</b> Изучение Rust</a>
<ol class='section'>
<li><a  href='../src/guessing-game.html'><b>4.1.</b> Угадайка</a>
</li>
<li><a  href='../src/dining-philosophers.html'><b>4.2.</b> Обедающие философы</a>
</li>
<li><a  href='../src/rust-inside-other-languages.html'><b>4.3.</b> Вызов кода на Rust из других языков</a>
</li>
</ol>
</li>
<li><a  href='../src/syntax-and-semantics.html'><b>5.</b> Синтаксис и семантика</a>
<ol class='section'>
<li><a  href='../src/variable-bindings.html'><b>5.1.</b> Связывание имён</a>
</li>
<li><a  href='../src/functions.html'><b>5.2.</b> Функции</a>
</li>
<li><a  href='../src/primitive-types.html'><b>5.3.</b> Простые типы</a>
</li>
<li><a  href='../src/comments.html'><b>5.4.</b> Комментарии</a>
</li>
<li><a  href='../src/if.html'><b>5.5.</b> Конструкция `if`</a>
</li>
<li><a  href='../src/loops.html'><b>5.6.</b> Циклы</a>
</li>
<li><a  href='../src/ownership.html'><b>5.7.</b> Владение</a>
</li>
<li><a  href='../src/references-and-borrowing.html'><b>5.8.</b> Ссылки и заимствование</a>
</li>
<li><a  href='../src/lifetimes.html'><b>5.9.</b> Время жизни</a>
</li>
<li><a  href='../src/mutability.html'><b>5.10.</b> Изменяемость</a>
</li>
<li><a  href='../src/structs.html'><b>5.11.</b> Структуры</a>
</li>
<li><a  href='../src/enums.html'><b>5.12.</b> Перечисления</a>
</li>
<li><a  href='../src/match.html'><b>5.13.</b> Конструкция `match`</a>
</li>
<li><a class='active' href='../src/patterns.html'><b>5.14.</b> Шаблоны сопоставления `match`</a>
</li>
<li><a  href='../src/method-syntax.html'><b>5.15.</b> Синтаксис методов</a>
</li>
<li><a  href='../src/vectors.html'><b>5.16.</b> Вектора</a>
</li>
<li><a  href='../src/strings.html'><b>5.17.</b> Строки</a>
</li>
<li><a  href='../src/generics.html'><b>5.18.</b> Обобщённое программирование</a>
</li>
<li><a  href='../src/traits.html'><b>5.19.</b> Типажи</a>
</li>
<li><a  href='../src/drop.html'><b>5.20.</b> Типаж `Drop`</a>
</li>
<li><a  href='../src/if-let.html'><b>5.21.</b> Конструкция `if let`</a>
</li>
<li><a  href='../src/trait-objects.html'><b>5.22.</b> Типажи-объекты</a>
</li>
<li><a  href='../src/closures.html'><b>5.23.</b> Замыкания</a>
</li>
<li><a  href='../src/ufcs.html'><b>5.24.</b> Универсальный синтаксис вызова функций</a>
</li>
<li><a  href='../src/crates-and-modules.html'><b>5.25.</b> Контейнеры и модули</a>
</li>
<li><a  href='../src/const-and-static.html'><b>5.26.</b> `const` и `static`</a>
</li>
<li><a  href='../src/attributes.html'><b>5.27.</b> Атрибуты</a>
</li>
<li><a  href='../src/type-aliases.html'><b>5.28.</b> Псевдонимы типов</a>
</li>
<li><a  href='../src/casting-between-types.html'><b>5.29.</b> Приведение типов</a>
</li>
<li><a  href='../src/associated-types.html'><b>5.30.</b> Ассоциированные типы</a>
</li>
<li><a  href='../src/unsized-types.html'><b>5.31.</b> Безразмерные типы</a>
</li>
<li><a  href='../src/operators-and-overloading.html'><b>5.32.</b> Перегрузка операций</a>
</li>
<li><a  href='../src/deref-coercions.html'><b>5.33.</b> Преобразования при разыменовании</a>
</li>
<li><a  href='../src/macros.html'><b>5.34.</b> Макросы</a>
</li>
<li><a  href='../src/raw-pointers.html'><b>5.35.</b> Сырые указатели</a>
</li>
<li><a  href='../src/unsafe.html'><b>5.36.</b> Небезопасный код</a>
</li>
</ol>
</li>
<li><a  href='../src/effective-rust.html'><b>6.</b> Эффективное использование Rust</a>
<ol class='section'>
<li><a  href='../src/the-stack-and-the-heap.html'><b>6.1.</b> Стек и куча</a>
</li>
<li><a  href='../src/testing.html'><b>6.2.</b> Тестирование</a>
</li>
<li><a  href='../src/conditional-compilation.html'><b>6.3.</b> Условная компиляция</a>
</li>
<li><a  href='../src/documentation.html'><b>6.4.</b> Документация</a>
</li>
<li><a  href='../src/iterators.html'><b>6.5.</b> Итераторы</a>
</li>
<li><a  href='../src/concurrency.html'><b>6.6.</b> Многозадачность</a>
</li>
<li><a  href='../src/error-handling.html'><b>6.7.</b> Обработка ошибок</a>
</li>
<li><a  href='../src/choosing-your-guarantees.html'><b>6.8.</b> Выбор гарантий</a>
</li>
<li><a  href='../src/ffi.html'><b>6.9.</b> Интерфейс внешних функций</a>
</li>
<li><a  href='../src/borrow-and-asref.html'><b>6.10.</b> Типажи `Borrow` и `AsRef`</a>
</li>
<li><a  href='../src/release-channels.html'><b>6.11.</b> Каналы сборок</a>
</li>
<li><a  href='../src/using-rust-without-the-standard-library.html'><b>6.12.</b> Using Rust without the standard library</a>
</li>
</ol>
</li>
<li><a  href='../src/nightly-rust.html'><b>7.</b> Нестабильные возможности Rust</a>
<ol class='section'>
<li><a  href='../src/compiler-plugins.html'><b>7.1.</b> Плагины к компилятору</a>
</li>
<li><a  href='../src/inline-assembly.html'><b>7.2.</b> Встроенный ассемблерный код</a>
</li>
<li><a  href='../src/no-stdlib.html'><b>7.3.</b> Без stdlib</a>
</li>
<li><a  href='../src/intrinsics.html'><b>7.4.</b> Внутренние средства</a>
</li>
<li><a  href='../src/lang-items.html'><b>7.5.</b> Элементы языка</a>
</li>
<li><a  href='../src/advanced-linking.html'><b>7.6.</b> Продвинутое руководство по компоновке</a>
</li>
<li><a  href='../src/benchmark-tests.html'><b>7.7.</b> Тесты производительности</a>
</li>
<li><a  href='../src/box-syntax-and-patterns.html'><b>7.8.</b> Синтаксис упаковки и шаблоны `match`</a>
</li>
<li><a  href='../src/slice-patterns.html'><b>7.9.</b> Шаблоны `match` для срезов</a>
</li>
<li><a  href='../src/associated-constants.html'><b>7.10.</b> Ассоциированные константы</a>
</li>
<li><a  href='../src/custom-allocators.html'><b>7.11.</b> Пользовательские менеджеры памяти</a>
</li>
</ol>
</li>
<li><a  href='../src/glossary.html'><b>8.</b> Глоссарий</a>
</li>
<li><a  href='../src/syntax-index.html'><b>9.</b> Syntax Index</a>
</li>
<li><a  href='../src/bibliography.html'><b>10.</b> Библиография</a>
</li>
</ol>
</div>
<div id='page-wrapper'>
<div id='page'>


    <h1 class="title">Шаблоны сопоставления `match`</h1>
    <p>Шаблоны достаточно часто используются в Rust. Мы уже использовали их в разделе
<a href="variable-bindings.html">Связывание переменных</a>, в разделе <a href="match.html">Конструкция <code>match</code></a>, а
также в некоторых других местах. Давайте коротко пробежимся по всем
возможностям, которые можно реализовать с помощью шаблонов!</p>

<p>Быстро освежим в памяти: сопоставлять с шаблоном литералы можно либо напрямую,
либо с использованием символа <code>_</code>, который означает <em>любой</em> случай:</p>

<pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> <span class="number">1</span>;

<span class="kw">match</span> <span class="ident">x</span> {
    <span class="number">1</span> <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;один&quot;</span>),
    <span class="number">2</span> <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;два&quot;</span>),
    <span class="number">3</span> <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;три&quot;</span>),
    _ <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;что угодно&quot;</span>),
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Alet%20x%20%3D%201%3B%0A%0Amatch%20x%20%7B%0A%20%20%20%201%20%3D%3E%20println!(%22%D0%BE%D0%B4%D0%B8%D0%BD%22)%2C%0A%20%20%20%202%20%3D%3E%20println!(%22%D0%B4%D0%B2%D0%B0%22)%2C%0A%20%20%20%203%20%3D%3E%20println!(%22%D1%82%D1%80%D0%B8%22)%2C%0A%20%20%20%20_%20%3D%3E%20println!(%22%D1%87%D1%82%D0%BE%20%D1%83%D0%B3%D0%BE%D0%B4%D0%BD%D0%BE%22)%2C%0A%7D%0A%7D">Run</a></pre>

<p>Этот код напечатает <code>один</code>.</p>

<h1 id='Сопоставление-с-несколькими-шаблонами' class='section-header'><a href='#Сопоставление-с-несколькими-шаблонами'>Сопоставление с несколькими шаблонами</a></h1>
<p>Вы можете сопоставлять с несколькими шаблонами, используя <code>|</code>:</p>

<pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> <span class="number">1</span>;

<span class="kw">match</span> <span class="ident">x</span> {
    <span class="number">1</span> <span class="op">|</span> <span class="number">2</span> <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;один или два&quot;</span>),
    <span class="number">3</span> <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;три&quot;</span>),
    _ <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;что угодно&quot;</span>),
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Alet%20x%20%3D%201%3B%0A%0Amatch%20x%20%7B%0A%20%20%20%201%20%7C%202%20%3D%3E%20println!(%22%D0%BE%D0%B4%D0%B8%D0%BD%20%D0%B8%D0%BB%D0%B8%20%D0%B4%D0%B2%D0%B0%22)%2C%0A%20%20%20%203%20%3D%3E%20println!(%22%D1%82%D1%80%D0%B8%22)%2C%0A%20%20%20%20_%20%3D%3E%20println!(%22%D1%87%D1%82%D0%BE%20%D1%83%D0%B3%D0%BE%D0%B4%D0%BD%D0%BE%22)%2C%0A%7D%0A%7D">Run</a></pre>

<p>Этот код напечатает <code>один или два</code>.</p>

<h1 id='Деструктуризация' class='section-header'><a href='#Деструктуризация'>Деструктуризация</a></h1>
<p>Если вы работаете с составным типом данных, вроде <a href="structs.html"><code>struct</code></a>, вы можете
разобрать его на части («деструктурировать») внутри шаблона:</p>

<pre class="rust rust-example-rendered">
<span class="kw">struct</span> <span class="ident">Point</span> {
    <span class="ident">x</span>: <span class="ident">i32</span>,
    <span class="ident">y</span>: <span class="ident">i32</span>,
}

<span class="kw">let</span> <span class="ident">origin</span> <span class="op">=</span> <span class="ident">Point</span> { <span class="ident">x</span>: <span class="number">0</span>, <span class="ident">y</span>: <span class="number">0</span> };

<span class="kw">match</span> <span class="ident">origin</span> {
    <span class="ident">Point</span> { <span class="ident">x</span>, <span class="ident">y</span> } <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;({},{})&quot;</span>, <span class="ident">x</span>, <span class="ident">y</span>),
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Astruct%20Point%20%7B%0A%20%20%20%20x%3A%20i32%2C%0A%20%20%20%20y%3A%20i32%2C%0A%7D%0A%0Alet%20origin%20%3D%20Point%20%7B%20x%3A%200%2C%20y%3A%200%20%7D%3B%0A%0Amatch%20origin%20%7B%0A%20%20%20%20Point%20%7B%20x%2C%20y%20%7D%20%3D%3E%20println!(%22(%7B%7D%2C%7B%7D)%22%2C%20x%2C%20y)%2C%0A%7D%0A%7D">Run</a></pre>

<p>Мы можем использовать <code>:</code>, чтобы привязать значение к новому имени.</p>

<pre class="rust rust-example-rendered">
<span class="kw">struct</span> <span class="ident">Point</span> {
    <span class="ident">x</span>: <span class="ident">i32</span>,
    <span class="ident">y</span>: <span class="ident">i32</span>,
}

<span class="kw">let</span> <span class="ident">origin</span> <span class="op">=</span> <span class="ident">Point</span> { <span class="ident">x</span>: <span class="number">0</span>, <span class="ident">y</span>: <span class="number">0</span> };

<span class="kw">match</span> <span class="ident">origin</span> {
    <span class="ident">Point</span> { <span class="ident">x</span>: <span class="ident">x1</span>, <span class="ident">y</span>: <span class="ident">y1</span> } <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;({},{})&quot;</span>, <span class="ident">x1</span>, <span class="ident">y1</span>),
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Astruct%20Point%20%7B%0A%20%20%20%20x%3A%20i32%2C%0A%20%20%20%20y%3A%20i32%2C%0A%7D%0A%0Alet%20origin%20%3D%20Point%20%7B%20x%3A%200%2C%20y%3A%200%20%7D%3B%0A%0Amatch%20origin%20%7B%0A%20%20%20%20Point%20%7B%20x%3A%20x1%2C%20y%3A%20y1%20%7D%20%3D%3E%20println!(%22(%7B%7D%2C%7B%7D)%22%2C%20x1%2C%20y1)%2C%0A%7D%0A%7D">Run</a></pre>

<p>Если нас интересуют только некоторые значения, мы можем не давать имена всем
составляющим:</p>

<pre class="rust rust-example-rendered">
<span class="kw">struct</span> <span class="ident">Point</span> {
    <span class="ident">x</span>: <span class="ident">i32</span>,
    <span class="ident">y</span>: <span class="ident">i32</span>,
}

<span class="kw">let</span> <span class="ident">origin</span> <span class="op">=</span> <span class="ident">Point</span> { <span class="ident">x</span>: <span class="number">0</span>, <span class="ident">y</span>: <span class="number">0</span> };

<span class="kw">match</span> <span class="ident">origin</span> {
    <span class="ident">Point</span> { <span class="ident">x</span>, .. } <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;x равен {}&quot;</span>, <span class="ident">x</span>),
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Astruct%20Point%20%7B%0A%20%20%20%20x%3A%20i32%2C%0A%20%20%20%20y%3A%20i32%2C%0A%7D%0A%0Alet%20origin%20%3D%20Point%20%7B%20x%3A%200%2C%20y%3A%200%20%7D%3B%0A%0Amatch%20origin%20%7B%0A%20%20%20%20Point%20%7B%20x%2C%20..%20%7D%20%3D%3E%20println!(%22x%20%D1%80%D0%B0%D0%B2%D0%B5%D0%BD%20%7B%7D%22%2C%20x)%2C%0A%7D%0A%7D">Run</a></pre>

<p>Этот код напечатает <code>x равен 0</code>.</p>

<p>Вы можете использовать это в любом сопоставлении: не обязательно игнорировать
именно первый элемент:</p>

<pre class="rust rust-example-rendered">
<span class="kw">struct</span> <span class="ident">Point</span> {
    <span class="ident">x</span>: <span class="ident">i32</span>,
    <span class="ident">y</span>: <span class="ident">i32</span>,
}

<span class="kw">let</span> <span class="ident">origin</span> <span class="op">=</span> <span class="ident">Point</span> { <span class="ident">x</span>: <span class="number">0</span>, <span class="ident">y</span>: <span class="number">0</span> };

<span class="kw">match</span> <span class="ident">origin</span> {
    <span class="ident">Point</span> { <span class="ident">y</span>, .. } <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;y равен {}&quot;</span>, <span class="ident">y</span>),
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Astruct%20Point%20%7B%0A%20%20%20%20x%3A%20i32%2C%0A%20%20%20%20y%3A%20i32%2C%0A%7D%0A%0Alet%20origin%20%3D%20Point%20%7B%20x%3A%200%2C%20y%3A%200%20%7D%3B%0A%0Amatch%20origin%20%7B%0A%20%20%20%20Point%20%7B%20y%2C%20..%20%7D%20%3D%3E%20println!(%22y%20%D1%80%D0%B0%D0%B2%D0%B5%D0%BD%20%7B%7D%22%2C%20y)%2C%0A%7D%0A%7D">Run</a></pre>

<p>Этот код напечатает <code>y равен 0</code>.</p>

<p>Можно произвести деструктуризацию любого составного типа данных — например,
<a href="primitive-types.html#tuples">кортежей</a> и <a href="enums.html">перечислений</a>.</p>

<h1 id='Игнорирование-связывания' class='section-header'><a href='#Игнорирование-связывания'>Игнорирование связывания</a></h1>
<p>Вы можете использовать в шаблоне <code>_</code>, чтобы проигнорировать соответствующее
значение. Например, вот сопоставление <code>Result&lt;T, E&gt;</code>:</p>

<pre class="rust rust-example-rendered">
<span class="kw">match</span> <span class="ident">some_value</span> {
    <span class="prelude-val">Ok</span>(<span class="ident">value</span>) <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;получили значение: {}&quot;</span>, <span class="ident">value</span>),
    <span class="prelude-val">Err</span>(_) <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;произошла ошибка&quot;</span>),
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Alet%20some_value%3A%20Result%3Ci32%2C%20%26'static%20str%3E%20%3D%20Err(%22%D0%97%D0%B4%D0%B5%D1%81%D1%8C%20%D0%B1%D1%8B%D0%BB%D0%B0%20%D0%BA%D0%B0%D0%BA%D0%B0%D1%8F-%D1%82%D0%BE%20%D0%BE%D1%88%D0%B8%D0%B1%D0%BA%D0%B0%22)%3B%0Amatch%20some_value%20%7B%0A%20%20%20%20Ok(value)%20%3D%3E%20println!(%22%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B8%D0%BB%D0%B8%20%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%3A%20%7B%7D%22%2C%20value)%2C%0A%20%20%20%20Err(_)%20%3D%3E%20println!(%22%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%BE%D1%88%D0%BB%D0%B0%20%D0%BE%D1%88%D0%B8%D0%B1%D0%BA%D0%B0%22)%2C%0A%7D%0A%7D">Run</a></pre>

<p>В первой ветви мы привязываем значение варианта <code>Ok</code> к имени <code>value</code>. А в ветви
обработки варианта <code>Err</code> мы используем <code>_</code>, чтобы проигнорировать конкретную
ошибку, и просто печатаем общее сообщение.</p>

<p><code>_</code> допустим в любом шаблоне, который связывает имена. Это можно использовать,
чтобы проигнорировать части большой структуры:</p>

<pre class="rust rust-example-rendered">
<span class="kw">fn</span> <span class="ident">coordinate</span>() <span class="op">-&gt;</span> (<span class="ident">i32</span>, <span class="ident">i32</span>, <span class="ident">i32</span>) {
    <span class="comment">// создаём и возвращаем какой-то кортеж из трёх элементов</span>
}

<span class="kw">let</span> (<span class="ident">x</span>, _, <span class="ident">z</span>) <span class="op">=</span> <span class="ident">coordinate</span>();<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Afn%20coordinate()%20-%3E%20(i32%2C%20i32%2C%20i32)%20%7B%0A%20%20%20%20%2F%2F%20%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D1%91%D0%BC%20%D0%B8%20%D0%B2%D0%BE%D0%B7%D0%B2%D1%80%D0%B0%D1%89%D0%B0%D0%B5%D0%BC%20%D0%BA%D0%B0%D0%BA%D0%BE%D0%B9-%D1%82%D0%BE%20%D0%BA%D0%BE%D1%80%D1%82%D0%B5%D0%B6%20%D0%B8%D0%B7%20%D1%82%D1%80%D1%91%D1%85%20%D1%8D%D0%BB%D0%B5%D0%BC%D0%B5%D0%BD%D1%82%D0%BE%D0%B2%0A(1%2C%202%2C%203)%0A%7D%0A%0Alet%20(x%2C%20_%2C%20z)%20%3D%20coordinate()%3B%0A%7D">Run</a></pre>

<p>Здесь мы связываем первый и последний элемент кортежа с именами <code>x</code> и <code>z</code>
соответственно, а второй элемент игнорируем.</p>

<p>Похожим образом, в шаблоне можно использовать <code>..</code>, чтобы проигнорировать
несколько значений.</p>

<pre class="rust rust-example-rendered">
<span class="kw">enum</span> <span class="ident">OptionalTuple</span> {
    <span class="ident">Value</span>(<span class="ident">i32</span>, <span class="ident">i32</span>, <span class="ident">i32</span>),
    <span class="ident">Missing</span>,
}

<span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> <span class="ident">OptionalTuple</span>::<span class="ident">Value</span>(<span class="number">5</span>, <span class="op">-</span><span class="number">2</span>, <span class="number">3</span>);

<span class="kw">match</span> <span class="ident">x</span> {
    <span class="ident">OptionalTuple</span>::<span class="ident">Value</span>(..) <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;Получили кортеж!&quot;</span>),
    <span class="ident">OptionalTuple</span>::<span class="ident">Missing</span> <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;Вот неудача.&quot;</span>),
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aenum%20OptionalTuple%20%7B%0A%20%20%20%20Value(i32%2C%20i32%2C%20i32)%2C%0A%20%20%20%20Missing%2C%0A%7D%0A%0Alet%20x%20%3D%20OptionalTuple%3A%3AValue(5%2C%20-2%2C%203)%3B%0A%0Amatch%20x%20%7B%0A%20%20%20%20OptionalTuple%3A%3AValue(..)%20%3D%3E%20println!(%22%D0%9F%D0%BE%D0%BB%D1%83%D1%87%D0%B8%D0%BB%D0%B8%20%D0%BA%D0%BE%D1%80%D1%82%D0%B5%D0%B6!%22)%2C%0A%20%20%20%20OptionalTuple%3A%3AMissing%20%3D%3E%20println!(%22%D0%92%D0%BE%D1%82%20%D0%BD%D0%B5%D1%83%D0%B4%D0%B0%D1%87%D0%B0.%22)%2C%0A%7D%0A%7D">Run</a></pre>

<p>Этот код печатает <code>Получили кортеж!</code>.</p>

<h1 id='ref-и-ref-mut' class='section-header'><a href='#ref-и-ref-mut'>ref и ref mut</a></h1>
<p>Если вы хотите получить <a href="references-and-borrowing.html">ссылку</a>, то используйте ключевое слово <code>ref</code>:</p>

<pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> <span class="number">5</span>;

<span class="kw">match</span> <span class="ident">x</span> {
    <span class="kw-2">ref</span> <span class="ident">r</span> <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;Получили ссылку на {}&quot;</span>, <span class="ident">r</span>),
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Alet%20x%20%3D%205%3B%0A%0Amatch%20x%20%7B%0A%20%20%20%20ref%20r%20%3D%3E%20println!(%22%D0%9F%D0%BE%D0%BB%D1%83%D1%87%D0%B8%D0%BB%D0%B8%20%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D1%83%20%D0%BD%D0%B0%20%7B%7D%22%2C%20r)%2C%0A%7D%0A%7D">Run</a></pre>

<p>Этот код напечатает <code>Получили ссылку на 5</code>.</p>

<p>Здесь <code>r</code> внутри <code>match</code> имеет тип <code>&amp;i32</code>. Другими словами, ключевое слово <code>ref</code>
<em>создает</em> ссылку, для использования в шаблоне. Если вам нужна изменяемая ссылка,
то <code>ref mut</code> будет работать аналогичным образом:</p>

<pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">x</span> <span class="op">=</span> <span class="number">5</span>;

<span class="kw">match</span> <span class="ident">x</span> {
    <span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">mr</span> <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;Получили изменяемую ссылку на {}&quot;</span>, <span class="ident">mr</span>),
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Alet%20mut%20x%20%3D%205%3B%0A%0Amatch%20x%20%7B%0A%20%20%20%20ref%20mut%20mr%20%3D%3E%20println!(%22%D0%9F%D0%BE%D0%BB%D1%83%D1%87%D0%B8%D0%BB%D0%B8%20%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D1%8F%D0%B5%D0%BC%D1%83%D1%8E%20%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D1%83%20%D0%BD%D0%B0%20%7B%7D%22%2C%20mr)%2C%0A%7D%0A%7D">Run</a></pre>

<h1 id='Сопоставление-с-диапазоном' class='section-header'><a href='#Сопоставление-с-диапазоном'>Сопоставление с диапазоном</a></h1>
<p>Вы можете сопоставлять с диапазоном значений, используя <code>...</code>:</p>

<pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> <span class="number">1</span>;

<span class="kw">match</span> <span class="ident">x</span> {
    <span class="number">1</span> ... <span class="number">5</span> <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;от одного до пяти&quot;</span>),
    _ <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;что угодно&quot;</span>),
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Alet%20x%20%3D%201%3B%0A%0Amatch%20x%20%7B%0A%20%20%20%201%20...%205%20%3D%3E%20println!(%22%D0%BE%D1%82%20%D0%BE%D0%B4%D0%BD%D0%BE%D0%B3%D0%BE%20%D0%B4%D0%BE%20%D0%BF%D1%8F%D1%82%D0%B8%22)%2C%0A%20%20%20%20_%20%3D%3E%20println!(%22%D1%87%D1%82%D0%BE%20%D1%83%D0%B3%D0%BE%D0%B4%D0%BD%D0%BE%22)%2C%0A%7D%0A%7D">Run</a></pre>

<p>Этот код напечатает <code>от одного до пяти</code>.</p>

<p>Диапазоны в основном используются с числами или одиночными символами (<code>char</code>).</p>

<pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> <span class="string">&#39;💅&#39;</span>;

<span class="kw">match</span> <span class="ident">x</span> {
    <span class="string">&#39;а&#39;</span> ... <span class="string">&#39;и&#39;</span> <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;ранняя буква&quot;</span>),
    <span class="string">&#39;к&#39;</span> ... <span class="string">&#39;я&#39;</span> <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;поздняя буква&quot;</span>),
    _ <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;что-то ещё&quot;</span>),
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Alet%20x%20%3D%20'%F0%9F%92%85'%3B%0A%0Amatch%20x%20%7B%0A%20%20%20%20'%D0%B0'%20...%20'%D0%B8'%20%3D%3E%20println!(%22%D1%80%D0%B0%D0%BD%D0%BD%D1%8F%D1%8F%20%D0%B1%D1%83%D0%BA%D0%B2%D0%B0%22)%2C%0A%20%20%20%20'%D0%BA'%20...%20'%D1%8F'%20%3D%3E%20println!(%22%D0%BF%D0%BE%D0%B7%D0%B4%D0%BD%D1%8F%D1%8F%20%D0%B1%D1%83%D0%BA%D0%B2%D0%B0%22)%2C%0A%20%20%20%20_%20%3D%3E%20println!(%22%D1%87%D1%82%D0%BE-%D1%82%D0%BE%20%D0%B5%D1%89%D1%91%22)%2C%0A%7D%0A%7D">Run</a></pre>

<p>Этот код напечатает <code>что-то ещё</code>.</p>

<h1 id='Связывание' class='section-header'><a href='#Связывание'>Связывание</a></h1>
<p>Вы можете связать значение с именем с помощью символа <code>@</code>:</p>

<pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> <span class="number">1</span>;

<span class="kw">match</span> <span class="ident">x</span> {
    <span class="ident">e</span> @ <span class="number">1</span> ... <span class="number">5</span> <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;получили элемент диапазона {}&quot;</span>, <span class="ident">e</span>),
    _ <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;что угодно&quot;</span>),
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Alet%20x%20%3D%201%3B%0A%0Amatch%20x%20%7B%0A%20%20%20%20e%20%40%201%20...%205%20%3D%3E%20println!(%22%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B8%D0%BB%D0%B8%20%D1%8D%D0%BB%D0%B5%D0%BC%D0%B5%D0%BD%D1%82%20%D0%B4%D0%B8%D0%B0%D0%BF%D0%B0%D0%B7%D0%BE%D0%BD%D0%B0%20%7B%7D%22%2C%20e)%2C%0A%20%20%20%20_%20%3D%3E%20println!(%22%D1%87%D1%82%D0%BE%20%D1%83%D0%B3%D0%BE%D0%B4%D0%BD%D0%BE%22)%2C%0A%7D%0A%7D">Run</a></pre>

<p>Этот код напечатает <code>получили элемент диапазона 1</code>. Это полезно, когда вы хотите
сделать сложное сопоставление для части структуры данных:</p>

<pre class="rust rust-example-rendered">
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>)]</span>
<span class="kw">struct</span> <span class="ident">Person</span> {
    <span class="ident">name</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span>,
}

<span class="kw">let</span> <span class="ident">name</span> <span class="op">=</span> <span class="string">&quot;Steve&quot;</span>.<span class="ident">to_string</span>();
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">x</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Person</span><span class="op">&gt;</span> <span class="op">=</span> <span class="prelude-val">Some</span>(<span class="ident">Person</span> { <span class="ident">name</span>: <span class="prelude-val">Some</span>(<span class="ident">name</span>) });
<span class="kw">match</span> <span class="ident">x</span> {
    <span class="prelude-val">Some</span>(<span class="ident">Person</span> { <span class="ident">name</span>: <span class="kw-2">ref</span> <span class="ident">a</span> @ <span class="prelude-val">Some</span>(_), .. }) <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;{:?}&quot;</span>, <span class="ident">a</span>),
    _ <span class="op">=&gt;</span> {}
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0A%23%5Bderive(Debug)%5D%0Astruct%20Person%20%7B%0A%20%20%20%20name%3A%20Option%3CString%3E%2C%0A%7D%0A%0Alet%20name%20%3D%20%22Steve%22.to_string()%3B%0Alet%20mut%20x%3A%20Option%3CPerson%3E%20%3D%20Some(Person%20%7B%20name%3A%20Some(name)%20%7D)%3B%0Amatch%20x%20%7B%0A%20%20%20%20Some(Person%20%7B%20name%3A%20ref%20a%20%40%20Some(_)%2C%20..%20%7D)%20%3D%3E%20println!(%22%7B%3A%3F%7D%22%2C%20a)%2C%0A%20%20%20%20_%20%3D%3E%20%7B%7D%0A%7D%0A%7D">Run</a></pre>

<p>Этот код напечатает <code>Some(&quot;Steve&quot;)</code>: мы связали внутреннюю <code>name</code> с <code>a</code>.</p>

<p>Если вы используете <code>@</code> совместно с <code>|</code>, то вы должны убедиться, что имя
связывается в каждой из частей шаблона:</p>

<pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> <span class="number">5</span>;

<span class="kw">match</span> <span class="ident">x</span> {
    <span class="ident">e</span> @ <span class="number">1</span> ... <span class="number">5</span> <span class="op">|</span> <span class="ident">e</span> @ <span class="number">8</span> ... <span class="number">10</span> <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;получили элемент диапазона {}&quot;</span>, <span class="ident">e</span>),
    _ <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;что угодно&quot;</span>),
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Alet%20x%20%3D%205%3B%0A%0Amatch%20x%20%7B%0A%20%20%20%20e%20%40%201%20...%205%20%7C%20e%20%40%208%20...%2010%20%3D%3E%20println!(%22%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B8%D0%BB%D0%B8%20%D1%8D%D0%BB%D0%B5%D0%BC%D0%B5%D0%BD%D1%82%20%D0%B4%D0%B8%D0%B0%D0%BF%D0%B0%D0%B7%D0%BE%D0%BD%D0%B0%20%7B%7D%22%2C%20e)%2C%0A%20%20%20%20_%20%3D%3E%20println!(%22%D1%87%D1%82%D0%BE%20%D1%83%D0%B3%D0%BE%D0%B4%D0%BD%D0%BE%22)%2C%0A%7D%0A%7D">Run</a></pre>

<h1 id='Ограничители-шаблонов' class='section-header'><a href='#Ограничители-шаблонов'>Ограничители шаблонов</a></h1>
<p>Вы можете ввести <em>ограничители шаблонов</em> (<em>match guards</em>) с помощью <code>if</code>:</p>

<pre class="rust rust-example-rendered">
<span class="kw">enum</span> <span class="ident">OptionalInt</span> {
    <span class="ident">Value</span>(<span class="ident">i32</span>),
    <span class="ident">Missing</span>,
}

<span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> <span class="ident">OptionalInt</span>::<span class="ident">Value</span>(<span class="number">5</span>);

<span class="kw">match</span> <span class="ident">x</span> {
    <span class="ident">OptionalInt</span>::<span class="ident">Value</span>(<span class="ident">i</span>) <span class="kw">if</span> <span class="ident">i</span> <span class="op">&gt;</span> <span class="number">5</span> <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;Получили целое больше пяти!&quot;</span>),
    <span class="ident">OptionalInt</span>::<span class="ident">Value</span>(..) <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;Получили целое!&quot;</span>),
    <span class="ident">OptionalInt</span>::<span class="ident">Missing</span> <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;Неудача.&quot;</span>),
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Aenum%20OptionalInt%20%7B%0A%20%20%20%20Value(i32)%2C%0A%20%20%20%20Missing%2C%0A%7D%0A%0Alet%20x%20%3D%20OptionalInt%3A%3AValue(5)%3B%0A%0Amatch%20x%20%7B%0A%20%20%20%20OptionalInt%3A%3AValue(i)%20if%20i%20%3E%205%20%3D%3E%20println!(%22%D0%9F%D0%BE%D0%BB%D1%83%D1%87%D0%B8%D0%BB%D0%B8%20%D1%86%D0%B5%D0%BB%D0%BE%D0%B5%20%D0%B1%D0%BE%D0%BB%D1%8C%D1%88%D0%B5%20%D0%BF%D1%8F%D1%82%D0%B8!%22)%2C%0A%20%20%20%20OptionalInt%3A%3AValue(..)%20%3D%3E%20println!(%22%D0%9F%D0%BE%D0%BB%D1%83%D1%87%D0%B8%D0%BB%D0%B8%20%D1%86%D0%B5%D0%BB%D0%BE%D0%B5!%22)%2C%0A%20%20%20%20OptionalInt%3A%3AMissing%20%3D%3E%20println!(%22%D0%9D%D0%B5%D1%83%D0%B4%D0%B0%D1%87%D0%B0.%22)%2C%0A%7D%0A%7D">Run</a></pre>

<p>Этот код напечатает <code>Получили целое!</code>.</p>

<p>Если вы используете <code>if</code> с несколькими шаблонами, он применяется к обеим частям:</p>

<pre class="rust rust-example-rendered">
<span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> <span class="number">4</span>;
<span class="kw">let</span> <span class="ident">y</span> <span class="op">=</span> <span class="bool-val">false</span>;

<span class="kw">match</span> <span class="ident">x</span> {
    <span class="number">4</span> <span class="op">|</span> <span class="number">5</span> <span class="kw">if</span> <span class="ident">y</span> <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;да&quot;</span>),
    _ <span class="op">=&gt;</span> <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;нет&quot;</span>),
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Alet%20x%20%3D%204%3B%0Alet%20y%20%3D%20false%3B%0A%0Amatch%20x%20%7B%0A%20%20%20%204%20%7C%205%20if%20y%20%3D%3E%20println!(%22%D0%B4%D0%B0%22)%2C%0A%20%20%20%20_%20%3D%3E%20println!(%22%D0%BD%D0%B5%D1%82%22)%2C%0A%7D%0A%7D">Run</a></pre>

<p>Этот код печатает <code>нет</code>, потому что <code>if</code> применяется ко всему <code>4 | 5</code>, а не
только к <code>5</code>. Другими словами, приоритет <code>if</code> выглядит так:</p>

<pre><code class="language-text">(4 | 5) if y =&gt; ...
</code></pre>

<p>а не так:</p>

<pre><code class="language-text">4 | (5 if y) =&gt; ...
</code></pre>

<h1 id='Заключение' class='section-header'><a href='#Заключение'>Заключение</a></h1>
<p>Вот так! Существует много разных способов использования конструкции
сопоставления с шаблоном, и все они могут быть смешаны и состыкованы, в
зависимости от того, что вы хотите сделать:</p>

<pre class="rust rust-example-rendered">
<span class="kw">match</span> <span class="ident">x</span> {
    <span class="ident">Foo</span> { <span class="ident">x</span>: <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">name</span>), <span class="ident">y</span>: <span class="prelude-val">None</span> } <span class="op">=&gt;</span> ...
}<a class="test-arrow" target="_blank" href="https://play.rust-lang.org/?code=fn%20main()%20%7B%0Amatch%20x%20%7B%0A%20%20%20%20Foo%20%7B%20x%3A%20Some(ref%20name)%2C%20y%3A%20None%20%7D%20%3D%3E%20...%0A%7D%0A%7D">Run</a></pre>

<p>Шаблоны — это очень мощный инструмент. Используйте их.</p>

    <script src='../rustbook.js'></script>
</div></div>


</body>
</html>